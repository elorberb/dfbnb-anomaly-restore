# 🔍 Depth-First Branch-and-Bound (DFBnB) Anomaly Restore

## Overview

This project implements the Depth-First Branch-and-Bound (DFBnB) algorithm in Python, designed to explore paths in a tree or graph to find the least costly path. The primary goal of this project is to restore and study an anomaly in the DFBnB algorithm under specific conditions, where it performs unexpectedly efficiently—running in polynomial time rather than the anticipated exponential time.

### 🧩 Anomaly Background

The anomaly occurs when using the DFBnB algorithm on a tree with:
- **🌳 Uniform branching factor**: Each node has a consistent number of children.
- **🎲 Random edge costs**: Edges have costs that are either 0 or 1, with equal probability.
- **🧮 Node ordering by cost**: Children of each node are explored in the order of increasing edge cost.

Under these conditions, the algorithm can find a path with a cost of 0 early in the search, setting the bound to 0 and pruning all other paths. This causes the algorithm to run in polynomial time, which is surprising given the usual exponential complexity of depth-first searches. The anomaly is particularly relevant when the expected number of zero-cost children of a node is greater than one.

For more detailed information on this anomaly, refer to the provided slides "SAI-3-4.ppt."

## 🗂️ Project Structure

```plaintext
.
├── README.md
├── dfbnb.py                       # Implementation of the DFBnB algorithm
├── experiment_utils.py            # Utilities for running experiments
├── main.py                        # Main script to execute experiments
├── results_analysis.ipynb         # Jupyter Notebook for analyzing experiment results
├── logs/                          # Directory where log files are stored
└── results/                       # Directory where experiment results are stored
```

### 📁 Files and Directories

- **`dfbnb.py`**: Contains the implementation of the DFBnB algorithm, including tree creation and the depth-first search with pruning logic.
- **`experiment_utils.py`**: Contains utility functions to run experiments across different configurations, save results, and manage databases.
- **`main.py`**: The entry point for running experiments. It sets up parameters and calls the experiment utilities.
- **`results_analysis.ipynb`**: Jupyter Notebook for analyzing the results generated by the experiments. It includes code for plotting graphs and comparing the performance of the algorithm under normal and anomalous conditions.
- **`logs/`**: Directory where logs related to experiment runs are stored.
- **`results/`**: Directory where the CSV files with experiment results are saved.

## 🚀 Getting Started

### 📋 Prerequisites

To run the project, ensure you have Python installed along with the following libraries:

- `sqlite3`
- `pandas`
- `random`

### ▶️ Running the Experiments

1. **Clone the repository**:
   ```bash
   git clone https://github.com/your-username/dfbnb-anomaly-restore.git
   cd dfbnb-anomaly-restore
   ```

2. **Run the experiments**:
   Execute the `main.py` script to run the experiments with default settings:
   ```bash
   python main.py
   ```

   This will generate databases in the `databases/` directory and save the experiment results in the `results/` directory.

3. **Modify Parameters**:
   - You can change the branching factors, depths, number of repetitions, edge cost distributions, and file handling configurations directly in the `main.py` script by modifying the parameters passed to the `run_experiments` function.

### 📊 Understanding the Results

The results are saved as CSV files in the `results/` directory. Each CSV file contains the average number of nodes expanded for different combinations of branching factors and depths. These results can be analyzed to detect the anomaly where the DFBnB algorithm runs in polynomial time.

### Experiment Output

After running the experiments, you might find that under certain conditions (specific branching factors and depths with random edge costs), the algorithm expands significantly fewer nodes than expected, indicating the presence of the anomaly.

#### **Comparing Normal Behavior to Anomalous Behavior**

To thoroughly investigate the anomaly, the experiments are designed to compare normal and anomalous conditions:

1. **Normal Conditions**:
   - **Branching Factors**: `[2, 3]` and `[4, 5]` for higher branching factors
   - **Depths**: We aimed to run until depth 20 for each configuration, but due to disk I/O errors and memory constraints, we stopped at depth 14 for anomalous conditions and depth 10 for normal conditions.
   - **Edge Costs**: Uniformly distributed between 1 and 10.
   - **Expected Outcome**: Exponential growth in the number of nodes expanded as the tree depth increases.

2. **Anomalous Conditions**:
   - **Branching Factors**: `[2, 3]` and `[4, 5]` for higher branching factors
   - **Depths**: Same depth limitations as for normal conditions.
   - **Edge Costs**: Randomly assigned as either 0 or 1, with equal probability.
   - **Expected Outcome**: Polynomial growth in the number of nodes expanded, significantly fewer than in normal conditions.

### 📝 Interpreting the Results

- **Exponential vs. Polynomial Growth**: The results show how the algorithm's performance deviates from the expected exponential growth under normal conditions to polynomial growth under anomalous conditions.
- **Data Visualization**: The plots clearly demonstrate the stark difference in algorithm behavior between normal and anomaly conditions, with exponential growth observed in normal settings and linear (polynomial) growth in anomalous settings.

---

### 📚 References

- **"SAI-3-4.ppt"**: A presentation providing insights into the anomaly detected in the DFBnB algorithm. This file contains theoretical background and experimental evidence supporting the anomaly.
